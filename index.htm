<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>テスト画面</title>
    <script>
      function postMessage() {
        if ("ReactNativeWebView" in window) {
          window.ReactNativeWebView.postMessage(
            JSON.stringify({ type: "hoge", hoge: "ほげ" })
          );
          //  alert('ReactNativeのWebViewにメッセージを送信しました。');
        } else {
          //  alert('WebViewではありません。');
        }
      }

      function makeURIComponent(input) {
        let strRet = encodeURIComponent(input);
        if (input.startsWith("wc:")) {
          const wcURI = encodeURIComponent(input);
          strRet = `uri=${wcURI}`;
        }
        return strRet;
      }

      function makeDynamicLink() {
        const packageIndex = Number(
          document.getElementById("txtPackage").value
        );
        const txtDeepLink = document.getElementById("txtDeepLink").value;
        const domainType = Number(document.getElementById("txtDomain").value);

        const arrDomain = [
          "https://kddidwdbg.page.link",
          "https://testalphauwallet.page.link",
          "https://alphauwallet.page.link",
        ];
        const arrPackage = [
          "com.kddi.digitalwallet",
          "com.kddi.wallet.test",
          "com.kddi.wallet",
        ];
        const arrPackageIOS = [
          "com.UPush.LKG",
          "com.kddi.wallet.stg",
          "com.kddi.wallet",
        ];
        const arrPrefix = [
          "https://web.test-wallet.kddi.com/intro.html",
          "https://web.test-wallet.kddi.com/intro.html",
          "https://web.wallet.kddi.com/intro.html",
        ];
        const arrPrefixNew = [
          "https://web.test-wallet.alpha-u.io/intro.html",
          "https://web.test-wallet.alpha-u.io/intro.html",
          "https://web.wallet.alpha-u.io/intro.html",
        ];

        let a = document.createElement("a");
        a.href = `${arrDomain[packageIndex]}/?apn=${
          arrPackage[packageIndex]
        }${`&ibi=${arrPackageIOS[packageIndex]}${
          packageIndex === 2 ? `&isi=6444401106` : ``
        }`}&link=${
          domainType === 1
            ? arrPrefix[packageIndex]
            : arrPrefixNew[packageIndex]
        }${txtDeepLink.startsWith("wc:") ? `/wc?` : `?`}${makeURIComponent(
          txtDeepLink
        )}`;
        a.innerText = a.href;
        let div = document.getElementById("divDynamicLink");
        let p = document.createElement("p");
        p.appendChild(a);
        div.appendChild(p);

        a = document.createElement("a");
        a.href = `${arrDomain[packageIndex]}/?apn=${
          arrPackage[packageIndex]
        }${`&ibi=${arrPackageIOS[packageIndex]}${
          packageIndex === 2 ? `&isi=6444401106` : ``
        }`}&efr=1&link=${
          domainType === 1
            ? arrPrefix[packageIndex]
            : arrPrefixNew[packageIndex]
        }${txtDeepLink.startsWith("wc:") ? `/wc?` : `?`}${makeURIComponent(
          txtDeepLink
        )}`;
        a.innerText = a.href;
        div = document.getElementById("divDynamicLink");
        p = document.createElement("p");
        p.appendChild(a);
        div.appendChild(p);

        if (txtDeepLink.startsWith("wc:")) {
          const a2 = document.createElement("a");
          a2.href = `alpha-u-wallet://wc?${makeURIComponent(txtDeepLink)}`;
          a2.innerText = a2.href;
          const p2 = document.createElement("p");
          p2.appendChild(a2);
          div.appendChild(p2);
        }
      }

      function showUserAgent() {
        const p = document.getElementById("userAgent");
        p.innerText = window.navigator.userAgent;
      }
    </script>
  </head>

  <body onload="showUserAgent()">
    <h1>ダミー画面 0530 13:07</h1>
    <p>
      パッケージ名：
      <select id="txtPackage">
        <option value="0">Debug環境</option>
        <option value="1" selected="selected">検証環境</option>
        <option value="2">商用環境</option>
      </select>
    </p>
    <p>
      domain:
      <select id="txtDomain">
        <option value="0" selected="selected">新ドメイン</option>
        <option value="1">旧ドメイン</option>
      </select>
    </p>
    <p>
      DeepLink（パラメータ）：<br /><input
        id="txtDeepLink"
        size="50"
        value="dwPmtTransactionId=01GH8J40TE5PE4JNM9WJRANDSN"
        onclick="this.value='';"
      />
    </p>
    <p>WalletConnectの場合、直接wc:のURLを記入する</p>
    <p>
      <button id="btnDynamicLink" onclick="makeDynamicLink()">
        DynamicLink作成する
      </button>
    </p>
    <div id="divDynamicLink"></div>
    <p><button onclick="postMessage()">postMessageテスト</button></p>
    <p id="userAgent"></p>
    <p />
    <p>
      <a
        href="https://alphauwallet.page.link/?link=https://web.wallet.kddi.com/intro.html?url=https://www.sushitop.io/13nftmaker/nftshot/index.html?meta=a991b8b8-173c-4937-a367-91a36e006c94&apn=com.kddi.wallet&ibi=com.kddi.wallet&isi=6444401106"
        >https://alphauwallet.page.link/?link=https://web.wallet.kddi.com/intro.html?url=https://www.sushitop.io/13nftmaker/nftshot/index.html?meta=a991b8b8-173c-4937-a367-91a36e006c94&apn=com.kddi.wallet&ibi=com.kddi.wallet&isi=6444401106</a
      >
    </p>
    <p>
      <a
        href="https://tlq3.adj.st/?adj_t=1cxmmkbi&adj_redirect=https%3A%2F%2Fweb.wallet.kddi.com%2Fintro.html&para1=value1&para2=value2"
        >https://tlq3.adj.st/?adj_t=1cxmmkbi&adj_redirect=https%3A%2F%2Fweb.wallet.kddi.com%2Fintro.html&amp;para1=value1&amp;para2=value2</a
      >
    </p>
    <p>
      <a
        href="https://app.adjust.com/jsr?url=https%3A%2F%2Ftlq3.adj.st%2F%3Fadj_t%3D1cxmmkbi%26adj_redirect%3Dhttps%253A%252F%252Fweb.wallet.kddi.com%252Fintro.html%26para1%3Dvalue1%26para2%3Dvalue2"
        >https://app.adjust.com/jsr?url=https%3A%2F%2Ftlq3.adj.st%2F%3Fadj_t%3D1cxmmkbi%26adj_redirect%3Dhttps%253A%252F%252Fweb.wallet.kddi.com%252Fintro.html%26para1%3Dvalue1%26para2%3Dvalue2</a
      >
    </p>
    <p>
      <a
        href="digitalwallet://signupWithSocial?code=965cb01556f44b618deeb4424cb78f23&state=GSYZLh5pidZTTLYK#"
        >digitalwallet://signupWithSocial?code=965cb01556f44b618deeb4424cb78f23&state=GSYZLh5pidZTTLYK#</a
      >
    </p>
    <p><a href="payment.htm">決済用テスト画面</a></p>
    <p />
    <p>サンプル動画</p>
    <p>
      <a href="https://tantiancai.github.io/video/h264_aac.mp4" target="_blank"
        >https://tantiancai.github.io/video/h264_aac.mp4</a
      >
    </p>
    <p>
      <a href="https://tantiancai.github.io/video/h264_mp3.mp4" target="_blank"
        >https://tantiancai.github.io/video/h264_mp3.mp4</a
      >
    </p>
    <p>
      <a href="https://tantiancai.github.io/video/mpeg4_aac.mp4" target="_blank"
        >https://tantiancai.github.io/video/mpeg4_aac.mp4</a
      >
    </p>
    <p>
      <a href="https://tantiancai.github.io/video/mpeg4_mp3.mp4" target="_blank"
        >https://tantiancai.github.io/video/mpeg4_mp3.mp4</a
      >
    </p>
  </body>
</html>
