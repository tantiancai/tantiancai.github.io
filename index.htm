<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>テスト画面</title>
<script>

function postMessage(){
  if ('ReactNativeWebView' in window) {
    window.ReactNativeWebView.postMessage(
      JSON.stringify({ type: 'hoge', hoge: 'ほげ' }),
    )
    alert('ReactNativeのWebViewにメッセージを送信しました。');
  } else {
    alert('WebViewではありません。');
  }
}

function makeDynamicLink(){
  const packageIndex = Number(document.getElementById('txtPackage').value);
  const txtDeepLink = document.getElementById('txtDeepLink').value;
  const txtPrefix = 'https://www.google.com/?';
  const txtProfix = txtDeepLink.replace(txtPrefix, '');
  
  const arrDomain = ['https://kddidwdbg.page.link', 'https://kddidwdev.page.link', 'https://kddidwstg.page.link', 'https://kddidw.page.link'];
  const arrPackage = ['com.kddi.digitalwallet', 'com.kddi.digitalwallet.dev1', 'com.kddi.digitalwallet.stg1', 'com.kddi.digitalwallet.prod1'];
  
  const a = document.createElement('a');
  a.href = arrDomain[packageIndex] + '/?link=' + txtPrefix + encodeURIComponent(txtProfix) + '&apn=' + arrPackage[packageIndex];
  a.innerText = a.href;
  const div = document.getElementById('divDynamicLink');
  const p = document.createElement('p');
  p.appendChild(a);
  div.appendChild(p);
}
  
</script>
</head>

<body>
<h1>ダミー画面</h1>
<p>パッケージ名：
  <select id="txtPackage">
    <option value="0">Debug環境</option>
    <option value="1">開発環境</option>
    <option value="2" selected="selected">評価環境</option>
    <option value="3">商用環境</option>
  </select>
</p>
<p>DeepLink：<br /><input id="txtDeepLink" size="90" value="https://www.google.com/?dwPmtTransactionId=01GH8J40TE5PE4JNM9WJRANDSN"></p>
<p><button id="btnDynamicLink" onclick="makeDynamicLink()">DynamicLink作成する</button></p>
<div id="divDynamicLink"></div>
<p><button onclick="postMessage()">postMessageテスト</button></p>
<p><a href="https://kddidwdbg.page.link/payment_test">https://kddidwdbg.page.link/payment_test</a></p>
<p><a href="https://kddidwdbg.page.link/payment_test" target="_blank">https://kddidwdbg.page.link/payment_test（Open in new window）</a></p>
  <p/>
  <p><a href="https://www.baidu.com">百度</a></p>
  <p/>
  <p><a href="https://kddidwdbg.page.link/?link=https://www.google.com/?dwPmtTransactionId%3D01GH8J40TE5PE4JNM9WJRANDSN&apn=com.kddi.digitalwallet">
    https://kddidwdbg.page.link/?link=https://www.google.com/?dwPmtTransactionId%3D01GH8J40TE5PE4JNM9WJRANDSN&apn=com.kddi.digitalwallet
    </a></p>
  <p/>
  <p>Mock API用</p>
  <p><a href="https://www.notexist.org/">登録完了URL（存在しないURL）</a></p>
  <p/>
  <p><a href="https://kddi.page.link/payment?result=0">決済完了URL</a></p>
  <p/>
  <p><a href="https://kddi.page.link/payment?result=1">決済失敗URL</a></p>
  <p>開発API用</p>
  <p><a href="https://www.notexist.org/cardEditEnd">登録完了URL（存在しないURL）</a></p>
  <p/>
  <p><a href="https://www.google.com/paySuccess">決済完了URL</a></p>
  <p/>
  <p><a href="https://www.google.com/payFailure?dwErrCode=DW90001&dwMessage=%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%8C%E7%99%BA%E7%94%9F%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F%E3%80%82%E6%94%AF%E6%89%95%E3%81%8C%E5%A4%B1%E6%95%97%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F%E3%80%82&pspErrCode=MPL90001">決済失敗URL</a></p>
</body>
 
</html>
